{% extends 'base.html' %} {% block title %} Simple Loan Calculator {% endblock
%} {% block body %}
<script
  src="https://kit.fontawesome.com/2c695035ff.js"
  crossorigin="anonymous"
></script>
<main>
  <h1>Simple Loan Calculator</h1>
  <hr />

  <form method="POST" action="/" id="calculateLoan">
    <div class="mb-3">
      <label class="form-label" for="loanAmt">Loan Amount:</label>
      <input
        type="text"
        class="form-control"
        id="loanAmt"
        name="loanAmt"
        placeholder="in $USD"
        pattern="\d{1,}"
        autofocus="autofocus"
        required
      />
    </div>

    <div class="mb-3">
      <label class="form-label" for="lengthOfLoan">Length of Loan:</label>
      <input
        type="text"
        class="form-control"
        id="lengthOfLoan"
        name="lengthOfLoan"
        placeholder="in years"
        pattern="\d{1,}"
        required
      />
    </div>

    <div class="mb-3">
      <label class="form-label" for="intRate">Interest Rate:</label>
      <input
        type="number"
        class="form-control"
        id="intRate"
        name="intRate"
        placeholder=".06"
        min="0"
        max="1"
        step="0.001"
        required
      />
    </div>
    <div class="mt-3">
      <input
        class="btn btn-primary"
        type="submit"
        id="submit"
        value="Calculate loan"
      />
    </div>
  </form>

  <p>&nbsp;</p>

  {% if payment %}
  <p class="lead">
    The payment for this loan will be
    <mark><strong>{{ payment }}</strong></mark> per month.
  </p>
  <p>&nbsp;</p>
  <h2>Loan amortization table</h2>
  <hr />
  <table class="table table-striped table-hover">
    <thead>
      <tr>
        <th>Month</th>
        <th>Monthly Payment</th>
        <th>Payment to Principal</th>
        <th>Monthly Interest</th>
        <th>Remaining Loan Balance</th>
        <th>
          Total Interest Paid
          <a
            id="totalIntPaid"
            title="Cumulative total of interest paid over the course of the loan."
            href=""
            onmousedown="displayText()"
            onmouseup="hideText()"
            ><i class="fa-solid fa-circle-question fa-2xs"></i
          ></a>
        </th>
      </tr>
    </thead>
    <tbody>
      {% for row in amortization %}
      <tr>
        <td>{{ row.month }}</td>
        <td>{{ row.monthlyLoanPayment }}</td>
        <td>{{ row.paymentToPrincipal }}</td>
        <td>{{ row.monthlyInterestPayment }}</td>
        <td>{{ row.monthlyLoanBalance }}</td>
        <td>{{ row.totalInterestPaid }}</td>
      </tr>

      {% endfor %}
    </tbody>
  </table>
  {% endif %}
</main>
<script>
  function displayText() {
    var text = document.getElementById("textField");
    text.style.display = "block";
  }

  function hideText() {
    var text = document.getElementById("textField");
    text.style.display = "none";
  }
</script>
{% endblock %}
